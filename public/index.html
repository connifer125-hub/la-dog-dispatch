<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LA Dog Dispatch - Every Urgent Dog Deserves Visibility</title>
    <meta name="description" content="LA Dog Dispatch automatically creates funding pages the moment a dog is euth-listed ‚Äî giving rescues and donors a coordinated head start.">
    
    <link rel="icon" type="image/png" href="/logo-icon.png">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Source+Sans+3:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --color-dark: #1a1614; --color-red: #c4281c; --color-cream: #f8f6f3;
            --color-tan: #e8e4dd; --color-text: #3a3632; --color-text-light: #6b6560;
            --color-border: #d4cfc7; --shadow-sm: 0 2px 12px rgba(26,22,20,0.06);
            --shadow-md: 0 8px 24px rgba(26,22,20,0.12); --shadow-lg: 0 16px 48px rgba(26,22,20,0.18);
        }
        body { font-family: 'Source Sans 3', sans-serif; color: var(--color-text); background: var(--color-cream); line-height: 1.65; }
        nav { background: rgba(248,246,243,0.97); border-bottom: 1px solid var(--border); position: sticky; top: 0; z-index: 100; }
        .nav-container { max-width: 1400px; margin: 0 auto; padding: 0 3rem; display: flex; justify-content: space-between; align-items: center; height: 75px; overflow: hidden; }
        .logo { font-family: 'Playfair Display', serif; font-size: 1.7rem; color: var(--color-dark); text-decoration: none; font-weight: 600; }
        .nav-links { display: flex; gap: 1.5rem; list-style: none; align-items: center; }
        .nav-links a { text-decoration: none; color: var(--text); font-weight: 500; font-size: 0.85rem; transition: color 0.2s; }
        .nav-links a:hover { color: var(--red); }
        .btn-primary { background: var(--color-red); color: white; padding: 0.8rem 2rem; border-radius: 6px; text-decoration: none; font-weight: 600; transition: all 0.3s; display: inline-block; cursor: pointer; }
        .btn-primary:hover { background: #9d1f16; transform: translateY(-2px); box-shadow: var(--shadow-md); }
        .btn-secondary { background: transparent; color: var(--color-dark); padding: 0.5rem 1.6rem; border-radius: 6px; text-decoration: none; font-weight: 600; border: 2px solid var(--color-dark); transition: all 0.3s; display: inline-block; cursor: pointer; }
        .btn-secondary:hover { background: var(--color-dark); color: white; }
        .hero { max-width: 1400px; margin: 0 auto; padding: 0.6rem 3rem 0.4rem; text-align: center; display: flex; flex-direction: column; justify-content: center; }
        .hero h1 { font-family: 'Playfair Display', serif; font-size: 1.8rem; line-height: 1.1; color: var(--color-dark); margin-bottom: .3rem; font-weight: 700; letter-spacing: -0.03em; padding: 0; }
        .hero .subheadline { font-size: 0.95rem; color: var(--color-text-light); max-width: 700px; margin: 0 auto .4rem; line-height: 1.5; white-space: nowrap; }
        .proof-points { display: flex; justify-content: center; gap: 1.5rem; margin-bottom: 0.4rem; flex-wrap: wrap; }
        .proof-point { display: flex; align-items: center; gap: 0.6rem; color: var(--color-text); font-weight: 500; }
        .proof-point::before { content: "‚úì"; color: var(--color-red); font-weight: bold; font-size: 1.3rem; }
        .hero-buttons { display: flex; gap: 1rem; justify-content: center; margin-bottom: 0; }
        section { max-width: 1400px; margin: 0 auto; padding: 0.8rem 3rem; }
        .section-title { font-family: 'Playfair Display', serif; font-size: 1.5rem; text-align: center; margin-top: 0; margin-bottom: 0.8rem; color: var(--color-dark); font-weight: 600; }
        #dogs-section { padding-top: 0 !important; padding-bottom: 1.5rem; margin-top: 0.2rem; }
        .category-filters { display: flex; gap: 1rem; justify-content: center; margin-bottom: 1rem; flex-wrap: wrap; }
        .category-btn { padding: 0.85rem 1.7rem; border: 2px solid var(--color-border); background: white; border-radius: 50px; cursor: pointer; font-weight: 500; transition: all 0.3s; font-size: 0.95rem; }
        .category-btn:hover { border-color: var(--color-red); color: var(--color-red); transform: translateY(-2px); }
        .category-btn.active { background: var(--color-red); color: white; border-color: var(--color-red); }
        .dogs-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(340px, 1fr)); gap: 2.5rem; }
        .dog-card { background: white; border-radius: 12px; overflow: hidden; box-shadow: var(--shadow-sm); transition: all 0.4s; cursor: pointer; border: 1px solid var(--color-border); }
        .dog-card:hover { transform: translateY(-6px); box-shadow: var(--shadow-lg); }
        .dog-image { width: 100%; height: 260px; object-fit: cover; background: var(--color-tan); }
        .dog-content { padding: 1.2rem; }
        .dog-badges { display: flex; gap: 0.6rem; margin-bottom: .4rem; flex-wrap: wrap; }
        .badge { padding: 0.4rem 0.9rem; border-radius: 20px; font-size: 0.75rem; font-weight: 600; text-transform: uppercase; }
        .badge-critical { background: #ffe5e5; color: #b91c1c; }
        .badge-urgent { background: #fff7ed; color: #c2410c; }
        .badge-category { background: #ecfdf5; color: #059669; }
        .badge-rescue-only { background: #fef3c7; color: #92400e; }
        .shelter-duration { font-size: 0.82rem; color: var(--color-text-light); margin-bottom: 0.4rem; display: flex; align-items: center; gap: 0.4rem; }
        .shelter-duration strong { color: var(--color-text); }
        .dog-name { font-family: 'Playfair Display', serif; font-size: 1.7rem; margin-bottom: 0.3rem; color: var(--color-dark); font-weight: 600; }
        .dog-details { color: var(--color-text-light); font-size: 0.95rem; margin-bottom: 0.4rem; }
        .dog-location { display: flex; align-items: center; gap: 0.5rem; color: var(--color-text-light); font-size: 0.9rem; margin-bottom: 0.4rem; }
        .dog-deadline { display: flex; align-items: flex-start; gap: 0.6rem; color: var(--color-red); font-weight: 600; font-size: 0.9rem; margin-bottom: 0.6rem; }
        .funding-progress { margin-top: 0.8rem; }
        .funding-amount { font-size: 1.6rem; font-weight: 700; color: var(--color-dark); margin-bottom: 0.3rem; }
        .funding-goal { font-size: 0.9rem; color: var(--color-text-light); margin-bottom: 0.5rem; }
        .progress-bar { height: 10px; background: var(--color-tan); border-radius: 10px; overflow: hidden; margin-bottom: 0.4rem; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #10b981, #34d399); border-radius: 10px; transition: width 0.5s; }
        .progress-text { font-size: 0.85rem; color: var(--color-text-light); }
        .dog-card .btn-primary { width: 100%; text-align: center; margin-top: 1.2rem; }

        /* ‚îÄ‚îÄ JOIN THE NETWORK SECTION ‚îÄ‚îÄ */
        .network-section {
            background: var(--color-dark);
            max-width: 100%;
            padding: 3rem 0 0;
            border-top: 3px solid var(--color-red);
            margin-top: 2rem;
        }
        .network-inner {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 3rem 2.5rem;
        }
        .network-eyebrow {
            text-align: center;
            font-size: 0.85rem;
            font-weight: 700;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: var(--color-red);
            margin-bottom: 0.5rem;
        }
        .network-title {
            font-family: 'Playfair Display', serif;
            font-size: 2.2rem;
            color: white;
            text-align: center;
            font-weight: 700;
            margin-bottom: 0.5rem;
            letter-spacing: -0.02em;
        }
        .network-subtitle {
            text-align: center;
            color: rgba(255,255,255,0.6);
            font-size: 1rem;
            max-width: 580px;
            margin: 0 auto 2rem;
            line-height: 1.7;
        }
        .network-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
        }
        .network-card {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 14px;
            padding: 1.5rem 1.5rem;
            text-decoration: none;
            transition: all 0.35s ease;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }
        .network-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0;
            height: 3px;
            background: var(--card-accent, var(--color-red));
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.35s ease;
        }
        .network-card:hover {
            background: rgba(255,255,255,0.09);
            border-color: rgba(255,255,255,0.2);
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }
        .network-card:hover::before {
            transform: scaleX(1);
        }
        .network-card-icon {
            font-size: 2rem;
            margin-bottom: 1rem;
            display: block;
        }
        .network-card:hover .network-card-icon { animation: walkerBounce 0.5s cubic-bezier(0.36, 0.07, 0.19, 0.97); }
        .network-card-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.25rem;
            color: white;
            font-weight: 600;
            margin-bottom: 0.6rem;
        }
        .network-card-desc {
            color: rgba(255,255,255,0.55);
            font-size: 0.9rem;
            line-height: 1.65;
            flex: 1;
            margin-bottom: 1.4rem;
        }
        .network-card-cta {
            font-size: 0.88rem;
            font-weight: 700;
            color: white;
            display: flex;
            align-items: center;
            gap: 0.4rem;
            transition: gap 0.2s;
        }
        .network-card:hover .network-card-cta { gap: 0.7rem; }
        .network-card-cta::after { content: '‚Üí'; }

        /* ‚îÄ‚îÄ FINAL CTA STRIP ‚îÄ‚îÄ */
        .final-strip {
            background: var(--color-dark);
            border-top: 1px solid rgba(255,255,255,0.08);
            padding: 2rem 3rem;
            text-align: center;
        }
        .final-strip p {
            color: rgba(255,255,255,0.6);
            font-size: 1rem;
            margin-bottom: 1.8rem;
            line-height: 1.8;
        }
        .final-strip p strong { color: white; }
        .final-strip-buttons { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; }
        .btn-outline-white {
            background: transparent;
            color: white;
            padding: 0.8rem 2rem;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 600;
            border: 2px solid rgba(255,255,255,0.35);
            transition: all 0.3s;
            display: inline-block;
        }
        .btn-outline-white:hover { border-color: white; background: rgba(255,255,255,0.08); }

        @media (max-width: 900px) {
            .nav-links { display: none; }
            .hero { padding: 0.6rem 1.2rem 0.4rem; }
            .hero h1 { font-size: 1.4rem; }
            .hero .subheadline { font-size: 0.85rem; white-space: normal !important; word-break: break-word; max-width: 100%; }
            .nav-container { padding: 0 1rem; overflow: hidden; }
            .logo { font-size: 1.3rem; flex-shrink: 0; }
            .logo { font-size: 1.3rem; }
            .hero h1 { font-size: 2rem; }
            .network-grid { grid-template-columns: repeat(2, 1fr); }
        }
        @media (max-width: 900px) {
            .hero { padding: 1.2rem 1.2rem 0.8rem; max-height: none; }
            .hero h1 { font-size: 1.55rem; }
            .hero .subheadline { font-size: 0.95rem; margin-bottom: 0.6rem; }
            .proof-points { gap: 0.8rem; flex-direction: column; align-items: flex-start; padding: 0 0.5rem; margin-bottom: 0.8rem; }
            .hero-buttons { flex-direction: column; align-items: stretch; padding: 0 1rem; }
            .hero-buttons .btn-primary, .hero-buttons .btn-secondary { text-align: center; }
            section { padding: 1rem 1rem; }
            #dogs-section { padding-top: 0.5rem; padding-bottom: 1.5rem; }
            .section-title { font-size: 1.3rem; }
            .category-filters { gap: 0.5rem; }
            .category-btn { padding: 0.55rem 0.9rem; font-size: 0.8rem; }
            .dogs-grid { grid-template-columns: 1fr; gap: 1.2rem; }
            .network-grid { grid-template-columns: 1fr; }
            .network-title { font-size: 1.6rem; }
            .network-section { padding: 2rem 0 0; margin-top: 1rem; }
            .network-inner { padding: 0 1rem 1.5rem; }
            .network-subtitle { font-size: 0.9rem; }
            .final-strip { padding: 1.5rem 1rem; }
            .final-strip-buttons { flex-direction: column; align-items: stretch; }
            body { padding-bottom: 64px; }
        }

        /* ‚îÄ‚îÄ BOTTOM TAB BAR (mobile only) ‚îÄ‚îÄ */
        .bottom-tab-bar { display: none; }
        @media (max-width: 900px) {
            .bottom-tab-bar {
                display: flex;
                position: fixed;
                bottom: 0; left: 0; right: 0;
                height: 64px;
                background: white;
                border-top: 1px solid var(--color-border);
                z-index: 200;
                box-shadow: 0 -4px 20px rgba(0,0,0,0.1);
                align-items: center;
            }
        }
        .tab-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.2rem;
            background: none;
            border: none;
            cursor: pointer;
            text-decoration: none;
            padding: 0.3rem 0;
            transition: all 0.2s;
            -webkit-tap-highlight-color: transparent;
            height: 100%;
        }
        .tab-item:active { opacity: 0.7; }
        .tab-icon { font-size: 1.2rem; line-height: 1; display: block; }
        .tab-label { font-size: 0.6rem; font-weight: 600; color: #999; font-family: 'Source Sans 3', sans-serif; letter-spacing: 0.02em; }
        .tab-item.active .tab-icon { filter: none; }
        .tab-item.active .tab-label { color: var(--color-red); }
        .tab-item.tab-fund {
            flex: 1.4;
            background: var(--color-red);
            margin: 0.4rem 0.3rem;
            border-radius: 10px;
            height: calc(100% - 0.8rem);
            box-shadow: 0 4px 12px rgba(196,40,28,0.35);
        }
        .tab-item.tab-fund .tab-label { color: white; font-size: 0.62rem; }
        .tab-item.tab-fund .tab-icon { font-size: 1.15rem; }
        .tab-item.tab-fund:active { transform: scale(0.96); opacity: 1; }

        /* ‚îÄ‚îÄ MORE SLIDE-UP DRAWER ‚îÄ‚îÄ */
        .more-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.45);
            z-index: 190;
            opacity: 0;
            transition: opacity 0.25s ease;
        }
        .more-overlay.active { display: block; }
        .more-overlay.visible { opacity: 1; }
        .more-drawer {
            display: none;
            position: fixed;
            bottom: 64px; left: 0; right: 0;
            background: white;
            border-radius: 16px 16px 0 0;
            z-index: 195;
            padding: 1rem 0 1rem;
            transform: translateY(100%);
            transition: transform 0.3s cubic-bezier(0.32, 0.72, 0, 1);
            box-shadow: 0 -8px 30px rgba(0,0,0,0.15);
        }
        @media (max-width: 900px) { .more-drawer { display: block; } }
        .more-drawer.open { transform: translateY(0); }
        .more-handle { width: 36px; height: 4px; background: #ddd; border-radius: 4px; margin: 0 auto 1rem; }
        .more-title { font-family: 'Playfair Display', serif; font-size: 0.75rem; color: var(--color-text-light); padding: 0 1.2rem 0.5rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.1em; }
        .more-link {
            display: flex;
            align-items: center;
            gap: 0.9rem;
            padding: 0.85rem 1.4rem;
            text-decoration: none;
            color: var(--color-dark);
            font-size: 0.95rem;
            font-weight: 500;
            border-top: 1px solid var(--color-border);
            transition: background 0.15s;
        }
        .more-link:active { background: var(--color-tan); }
        .more-link-icon { font-size: 1.1rem; width: 1.5rem; text-align: center; }
        .more-link-arrow { margin-left: auto; color: #ccc; }
            .walker-pair { display: flex; align-items: flex-end; gap: 0.05em; line-height: 1; }
        .walker-woman { display: inline-block; transform: scaleX(-1); font-size: 2rem; }
        .walker-dog { display: inline-block; transform: scaleX(-1); font-size: 1.2rem; position: relative; top: 0.15em; }
        .network-card:hover .walker-pair { animation: walkerBounce 0.5s cubic-bezier(0.36, 0.07, 0.19, 0.97); }
        @keyframes walkerBounce { 0%,100%{transform:translateY(0)} 25%{transform:translateY(-6px)} 75%{transform:translateY(-3px)} }

        .logo-img { height: 52px; width: auto; display: block; }
        @media (max-width: 900px) { .logo-img { height: 40px; } }

        .dog-share-btns { display: flex; gap: 0.4rem; margin-top: 0.6rem; flex-wrap: wrap; justify-content: center; }
        .btn-ig { background: linear-gradient(135deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888); color: white; padding: 0.42rem 0.8rem; border-radius: 6px; font-size: 0.75rem; font-weight: 700; border: none; cursor: pointer; font-family: inherit; white-space: nowrap; }
        .btn-save { background: #1a1614; color: white; padding: 0.42rem 0.8rem; border-radius: 6px; font-size: 0.75rem; font-weight: 700; border: none; cursor: pointer; font-family: inherit; white-space: nowrap; }
        .btn-caption { background: white; color: var(--color-text); padding: 0.42rem 0.8rem; border-radius: 6px; font-size: 0.75rem; font-weight: 600; border: 1.5px solid var(--color-border); cursor: pointer; font-family: inherit; white-space: nowrap; }
        .btn-caption.copied { background: #dcfce7; border-color: #86efac; color: #166534; }
    </style>
</head>
<body>
    <nav>
        <div class="nav-container">
            <a href="/" class="logo"><img src="/logo-wordmark.png" alt="LA Dog Dispatch" class="logo-img"></a>
            <ul class="nav-links">
                <li><a href="#dogs-section">Urgent Dogs</a></li>
                <li><a href="/how-it-works.html">How It Works</a></li>
                <li><a href="/about.html">About</a></li>
                <li><a href="#network-section">Join the Network</a></li>
                <li><a href="#dogs-section" class="btn-primary">Fund a Dog</a></li>
            </ul>
        </div>
    </nav>

    <!-- ‚ïê‚ïê‚ïê HERO (UNCHANGED) ‚ïê‚ïê‚ïê -->
    <section class="hero">
        <h1>Every Urgent Dog Deserves Visibility ‚Äî Immediately.</h1>
        <p class="subheadline">LA Dog Dispatch automatically creates funding pages the moment a dog is euth-listed ‚Äî giving rescues and donors a coordinated head start before time runs out.</p>
        <div class="proof-points">
            <div class="proof-point">Funding pages created the moment a dog is listed</div>
            <div class="proof-point">Shared across a centralized donor network</div>
            <div class="proof-point">Per-dog donations distributed directly to committing rescues</div>
        </div>
        <div class="hero-buttons">
            <a href="#dogs-section" class="btn-primary">Fund a Dog</a>
            <a href="/donate.html" class="btn-secondary">Become a Member</a>
        </div>
    </section>

    <!-- ‚ïê‚ïê‚ïê DOGS GRID (UNCHANGED) ‚ïê‚ïê‚ïê -->
    <section id="dogs-section">
        <h2 class="section-title">Dogs Needing Funding Now</h2>
        <div class="category-filters">
            <button class="category-btn active" data-category="all">All Dogs</button>
            <button class="category-btn" data-category="rescue_only">üîí Rescue Only</button>
        </div>
        <div class="dogs-grid" id="dogs-grid"></div>
    </section>

    <!-- ‚ïê‚ïê‚ïê JOIN THE NETWORK HUB ‚ïê‚ïê‚ïê -->
    <div class="network-section" id="network-section">
        <div class="network-inner">
            <p class="network-eyebrow">The LA Dog Dispatch Network</p>
            <h2 class="network-title">Every Role Matters</h2>
            <p class="network-subtitle">Dogs are saved when the right people move together. Find where you fit.</p>

            <div class="network-grid">

                <a href="/foster.html" class="network-card" style="--card-accent: #f59e0b;">
                    <span class="network-card-icon">üè†</span>
                    <div class="network-card-title">Become a Foster</div>
                    <p class="network-card-desc">More dogs get saved when more fosters say yes. Open your home while a rescue finds them a forever family.</p>
                    <span class="network-card-cta">Sign up to foster</span>
                </a>

                <a href="/donate.html" class="network-card" style="--card-accent: #10b981;">
                    <span class="network-card-icon">üíõ</span>
                    <div class="network-card-title">Donate or Become a Member</div>
                    <p class="network-card-desc">Fund specific dogs or support the whole system with a monthly membership. Your donation goes directly to the rescue that pulls the dog you funded.</p>
                    <span class="network-card-cta">Support the mission</span>
                </a>

                <a href="/rescue.html" class="network-card" style="--card-accent: #c4281c;">
                    <span class="network-card-icon">üêæ</span>
                    <div class="network-card-title">Rescue Partner</div>
                    <p class="network-card-desc">We fuel vetted rescues ‚Äî connecting them to fosters, confirmed donor funds, and a dashboard that automates coordination so they can pull more dogs faster.</p>
                    <span class="network-card-cta">Rescue partner portal</span>
                </a>

                <a href="/transport.html" class="network-card" style="--card-accent: #8b5cf6;">
                    <span class="network-card-icon">üöó</span>
                    <div class="network-card-title">Dog Transporter</div>
                    <p class="network-card-desc">Getting dogs from shelters to fosters and rescues ‚Äî locally or to other cities ‚Äî is critical to every pull. Sign up to be on our transport list.</p>
                    <span class="network-card-cta">Sign up to transport</span>
                </a>

                <a href="/social.html" class="network-card" style="--card-accent: #06b6d4;">
                    <span class="network-card-icon"><span style="display:inline-block; transform:scaleX(-1);">üì¢</span></span>
                    <div class="network-card-title">Social Media Sharer</div>
                    <p class="network-card-desc">Every share is a lifeline. Get ready-to-post content for urgent dogs delivered to you. No shelter visit required ‚Äî just a phone and a following.</p>
                    <span class="network-card-cta">Start sharing</span>
                </a>

                <a href="/vet.html" class="network-card" style="--card-accent: #f43f5e;">
                    <span class="network-card-icon">üè•</span>
                    <div class="network-card-title">Discount Vet Partner</div>
                    <p class="network-card-desc">Medical costs are often the barrier between a dog living and dying. Partner with us to offer discounted care for rescued dogs and be listed in our network directory.</p>
                    <span class="network-card-cta">Partner with us</span>
                </a>
                </div>
        </div>

        <!-- Final strip inside the dark section -->
        <div class="final-strip">
            <p>Dogs don't run out of time because people don't care.<br>
            They run out of time because <strong>visibility starts too late.</strong><br>
            We start it earlier.</p>
            <div class="final-strip-buttons">
                <a href="#dogs-section" class="btn-primary">Fund a Dog</a>
                <a href="/donate.html" class="btn-outline-white">Become a Member</a>
            </div>
        </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê BOTTOM TAB BAR (mobile only) ‚ïê‚ïê‚ïê -->

    <!-- NEWSLETTER SIGN-UP -->
    <div id="signup-section" style="background: white; border-top: 1px solid var(--color-border); padding: 1.8rem 3rem 3rem;">
        <div style="max-width: 600px; margin: 0 auto; text-align: center;">
            <p style="font-size: 0.72rem; font-weight: 700; letter-spacing: 0.14em; text-transform: uppercase; color: var(--color-red); margin-bottom: 0.4rem;">Stay Connected</p>
            <h2 style="font-family: 'Playfair Display', serif; font-size: 1.4rem; color: var(--color-dark); font-weight: 700; margin-bottom: 0.4rem;">Stay connected with our work and learn how you can help.</h2>
            <p style="font-size: 0.9rem; color: var(--color-text-light); margin-bottom: 1.2rem; line-height: 1.6;">Dog alerts, rescue wins, and network news ‚Äî straight to your inbox or phone.</p>
            <form id="newsletter-form" style="display: flex; flex-direction: column; gap: 0.7rem; align-items: center;">
                <div style="display: flex; gap: 0.6rem; width: 100%; max-width: 480px; flex-wrap: wrap; justify-content: center;">
                    <input type="text" id="nl-name" placeholder="Your first name" required style="flex: 1; min-width: 140px; padding: 0.6rem 0.9rem; border: 1.5px solid var(--color-border); border-radius: 7px; font-size: 0.9rem; font-family: inherit; background: var(--color-cream);">
                    <input type="email" id="nl-email" placeholder="your@email.com" required style="flex: 2; min-width: 200px; padding: 0.6rem 0.9rem; border: 1.5px solid var(--color-border); border-radius: 7px; font-size: 0.9rem; font-family: inherit; background: var(--color-cream);">
                </div>
                <input type="tel" id="nl-phone" placeholder="Phone (optional ‚Äî for dog alerts)" style="width: 100%; max-width: 480px; padding: 0.6rem 0.9rem; border: 1.5px solid var(--color-border); border-radius: 7px; font-size: 0.9rem; font-family: inherit; background: var(--color-cream);">
                <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; justify-content: center;">
                    <label style="display: flex; align-items: center; gap: 0.4rem; font-size: 0.82rem; font-weight: 500; cursor: pointer; background: var(--color-cream); border: 1.5px solid var(--color-border); border-radius: 20px; padding: 0.3rem 0.8rem;">
                        <input type="checkbox" id="nl-alerts" checked style="accent-color: var(--color-red);"> Dog alerts
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.4rem; font-size: 0.82rem; font-weight: 500; cursor: pointer; background: var(--color-cream); border: 1.5px solid var(--color-border); border-radius: 20px; padding: 0.3rem 0.8rem;">
                        <input type="checkbox" id="nl-newsletter" checked style="accent-color: var(--color-red);"> Newsletter
                    </label>
                    <label style="display: flex; align-items: center; gap: 0.4rem; font-size: 0.82rem; font-weight: 500; cursor: pointer; background: var(--color-cream); border: 1.5px solid var(--color-border); border-radius: 20px; padding: 0.3rem 0.8rem;">
                        <input type="checkbox" id="nl-text" style="accent-color: var(--color-red);"> Text me instead
                    </label>
                </div>
                <button type="submit" style="background: var(--color-red); color: white; padding: 0.55rem 1.8rem; border-radius: 7px; font-weight: 700; font-size: 0.9rem; border: none; cursor: pointer; font-family: inherit; transition: background 0.2s; margin-bottom: 2rem;">Sign Me Up ‚Üí</button>
            </form>
            <div id="nl-success" style="display: none; color: #166534; font-size: 0.9rem; font-weight: 600; margin-top: 0.8rem; margin-bottom: 2rem;">‚úì You're in! We'll be in touch soon.</div>
        </div>
    </div>


    <!-- Footer -->
    <footer style="background: var(--color-dark); color: white; padding: 2rem 3rem; text-align: center;">
        <div style="max-width: 1400px; margin: 0 auto;">
            <img src="/logo-wordmark.png" alt="LA Dog Dispatch" style="height: 36px; width: auto; margin-bottom: 1rem; opacity: 0.9;">
            <p style="font-size: 0.8rem; color: rgba(255,255,255,0.45); margin-bottom: 0.6rem;">Powered by <a href="https://hotgirlscare.com" target="_blank" style="color: rgba(255,255,255,0.6); text-decoration: none;">Hot Girls Care Foundation</a> ¬∑ Los Angeles, CA</p>
            <p style="font-size: 0.78rem; color: rgba(255,255,255,0.3);">
                <a href="/terms.html" style="color: rgba(255,255,255,0.45); text-decoration: none; margin: 0 0.8rem;">Terms of Service</a>
                <a href="/privacy.html" style="color: rgba(255,255,255,0.45); text-decoration: none; margin: 0 0.8rem;">Privacy Policy</a>
                <a href="mailto:hello@ladogdispatch.com" style="color: rgba(255,255,255,0.45); text-decoration: none; margin: 0 0.8rem;">Contact</a>
            </p>
            <p style="font-size: 0.72rem; color: rgba(255,255,255,0.2); margin-top: 0.8rem;">¬© 2026 Hot Girls Care Foundation. All rights reserved.</p>
        </div>
    </footer>

    <canvas id="card-canvas" style="display:none;" width="1080" height="1080"></canvas>
    <nav class="bottom-tab-bar">
        <a href="#dogs-section" class="tab-item active" onclick="setActiveTab(this)">
            <span class="tab-icon">üêï</span>
            <span class="tab-label">Dogs</span>
        </a>
        <a href="/foster.html" class="tab-item" onclick="setActiveTab(this)">
            <span class="tab-icon">üè†</span>
            <span class="tab-label">Foster</span>
        </a>
        <a href="https://givebutter.com/la_dog_dispatch" target="_blank" class="tab-item tab-fund">
            <span class="tab-icon">$</span>
            <span class="tab-label">Fund a Dog</span>
        </a>
        <a href="/rescue.html" class="tab-item" onclick="setActiveTab(this)">
            <span class="tab-icon">‚òÖ</span>
            <span class="tab-label">Rescue</span>
        </a>
        <button class="tab-item" onclick="toggleMore()">
            <span class="tab-icon">‚ò∞</span>
            <span class="tab-label">More</span>
        </button>
    </nav>

    <!-- ‚ïê‚ïê‚ïê MORE SLIDE-UP DRAWER ‚ïê‚ïê‚ïê -->
    <div class="more-overlay" id="more-overlay" onclick="closeMore()"></div>
    <div class="more-drawer" id="more-drawer">
        <div class="more-handle"></div>
        <div class="more-title">More</div>
        <a href="/donate.html" class="more-link">
            <span class="more-link-icon">üíõ</span> Donate / Become a Member
            <span class="more-link-arrow">‚Ä∫</span>
        </a>
        <a href="/how-it-works.html" class="more-link">
            <span class="more-link-icon">üí°</span> How It Works
            <span class="more-link-arrow">‚Ä∫</span>
        </a>
        <a href="/volunteer.html" class="more-link">
            <span class="more-link-icon">üö∂</span> Volunteer / Walker
            <span class="more-link-arrow">‚Ä∫</span>
        </a>
        <a href="/social.html" class="more-link">
            <span class="more-link-icon">üì¢</span> Share on Social Media
            <span class="more-link-arrow">‚Ä∫</span>
        </a>
        <a href="/vet.html" class="more-link">
            <span class="more-link-icon">üè•</span> Discount Vet Partner
            <span class="more-link-arrow">‚Ä∫</span>
        </a>
        <a href="/about.html" class="more-link">
            <span class="more-link-icon">‚ÑπÔ∏è</span> About LA Dog Dispatch
            <span class="more-link-arrow">‚Ä∫</span>
        </a>
    </div>

    <script>
        // ‚îÄ‚îÄ More drawer ‚îÄ‚îÄ
        function toggleMore() {
            const overlay = document.getElementById('more-overlay');
            const drawer = document.getElementById('more-drawer');
            const isOpen = drawer.classList.contains('open');
            if (isOpen) {
                closeMore();
            } else {
                overlay.classList.add('active');
                requestAnimationFrame(() => {
                    overlay.classList.add('visible');
                    drawer.classList.add('open');
                });
            }
        }
        function closeMore() {
            const overlay = document.getElementById('more-overlay');
            const drawer = document.getElementById('more-drawer');
            overlay.classList.remove('visible');
            drawer.classList.remove('open');
            setTimeout(() => overlay.classList.remove('active'), 250);
        }

        // ‚îÄ‚îÄ Active tab highlight ‚îÄ‚îÄ
        function setActiveTab(el) {
            document.querySelectorAll('.bottom-tab-bar .tab-item').forEach(t => t.classList.remove('active'));
            el.classList.add('active');
        }


        let allDogs = [];
        let currentCategory = 'all';

        function formatShelterDate(dateStr) {
            if (!dateStr) return '';
            const d = new Date(dateStr);
            return `${d.getMonth()+1}/${String(d.getDate()).padStart(2,'0')}/${String(d.getFullYear()).slice(-2)}`;
        }

        function getShelterDuration(intakeDateStr) {
            if (!intakeDateStr) return '';
            const intake = new Date(intakeDateStr);
            const now = new Date();
            const diffDays = Math.floor((now - intake) / (1000 * 60 * 60 * 24));
            if (diffDays < 7) return `${diffDays} day${diffDays !== 1 ? 's' : ''}`;
            if (diffDays < 30) {
                const weeks = Math.floor(diffDays / 7);
                return `${weeks} week${weeks !== 1 ? 's' : ''}`;
            }
            const months = Math.floor(diffDays / 30);
            return `${months} month${months !== 1 ? 's' : ''}`;
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            const month = date.getMonth() + 1;
            const day = date.getDate();
            const year = date.getFullYear().toString().slice(-2);
            return `${month}/${day}/${year}`;
        }

        function getDaysUntil(deadline) {
            const now = new Date();
            const deadlineDate = new Date(deadline);
            const diffTime = deadlineDate - now;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            return diffDays;
        }

        function getUrgencyBadge(daysUntil) {
            if (daysUntil <= 1) return 'CRITICAL';
            if (daysUntil <= 3) return 'URGENT';
            return null;
        }

        function createDogCard(dog) {
            const raisedAmount = 0;
            const goalAmount = parseFloat(dog.goal_amount) || 500;
            const daysUntil = getDaysUntil(dog.deadline);
            if (daysUntil < 0) return '';
            const urgencyBadge = getUrgencyBadge(daysUntil);
            const formattedDeadline = formatDate(dog.deadline);
            const percentage = goalAmount > 0 ? Math.round((raisedAmount / goalAmount) * 100) : 0;
            const categoryIcons = { medical: 'üè•', ice: 'üö®', death: 'üíî', general: 'üêï' };
            const daysText = daysUntil === 1 ? '1 day' : `${daysUntil} days`;
            return `
                <div class="dog-card">
                    <img src="${dog.photo_url || 'https://images.unsplash.com/photo-1587300003388-59208cc962cb?w=400'}" 
                         alt="${dog.name}" class="dog-image"
                         onerror="this.src='https://images.unsplash.com/photo-1587300003388-59208cc962cb?w=400'">
                    <div class="dog-content">
                        <div class="dog-badges">
                            ${dog.rescue_only ? `<span class="badge badge-rescue-only">üîí Rescue Only ‚Äî Must be pulled by a rescue organization</span>` : ''}
                        </div>
                        <h3 class="dog-name">${dog.name}</h3>
                        <p class="dog-details">${dog.breed} ‚Ä¢ ${dog.age} ‚Ä¢ ${dog.gender}</p>
                        <div class="dog-location">üìç ${dog.shelter}</div>
                        ${dog.intake_date ? `<div class="shelter-duration">üè† <span>At shelter: <strong>${formatShelterDate(dog.intake_date)}</strong>${dog.list_date ? ` ¬∑ Listed: <strong>${formatShelterDate(dog.list_date)}</strong>` : ''} ¬∑ <strong>${getShelterDuration(dog.intake_date)}</strong></span></div>` : ''}
                        <div class="dog-deadline">‚è∞ <span>${formattedDeadline} (${daysText})</span></div>
                        <div class="funding-progress">
                            <div class="funding-amount">$${raisedAmount.toFixed(2)}</div>
                            <div class="funding-goal">of $${goalAmount.toFixed(2)} goal</div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${Math.min(percentage, 100)}%"></div>
                            </div>
                            <div class="progress-text">${percentage}% funded</div>
                        </div>
                        <a href="${dog.givebutter_url || 'https://givebutter.com/la_dog_dispatch'}" 
                           target="_blank" rel="noopener" class="btn-primary" 
                           onclick="event.stopPropagation()">üíõ Fund This Dog</a>
                        <div class="dog-share-btns">
                            <button class="btn-ig" onclick="event.stopPropagation(); shareIGStory(${JSON.stringify(dog).replace(/"/g,'&quot;')})">üì± IG Story</button>
                            <button class="btn-save" onclick="event.stopPropagation(); saveCard(${JSON.stringify(dog).replace(/"/g,'&quot;')})">‚¨á Save</button>
                            <button class="btn-caption" onclick="event.stopPropagation(); copyDogCaption(this, ${JSON.stringify(dog).replace(/"/g,'&quot;')})">Copy Caption</button>
                        </div>
                    </div>
                </div>
            `;
        }

        async function loadDogs() {
            try {
                const response = await fetch('/api/dogs');
                const data = await response.json();
                const now = new Date();
                allDogs = data.dogs.filter(dog => {
                    const deadline = new Date(dog.deadline);
                    return deadline > now;
                });
                renderDogs();
            } catch (error) {
                console.error('Error loading dogs:', error);
            }
        }

        function renderDogs() {
            const grid = document.getElementById('dogs-grid');
            let filteredDogs = allDogs;
            if (currentCategory === 'rescue_only') {
                filteredDogs = allDogs.filter(dog => dog.rescue_only);
            }
            if (filteredDogs.length === 0) {
                grid.innerHTML = '<p style="text-align: center; color: #6b6560; grid-column: 1/-1; padding: 3rem;">No rescue-only dogs listed right now.</p>';
                return;
            }
            grid.innerHTML = filteredDogs.map(createDogCard).filter(Boolean).join('');
        }

        document.querySelectorAll('.category-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentCategory = btn.dataset.category;
                renderDogs();
            });
        });

        loadDogs();
    
    // Newsletter sign-up
    document.getElementById('newsletter-form').addEventListener('submit', async (e) => {
        e.preventDefault();
        const btn = e.target.querySelector('button[type="submit"]');
        btn.textContent = 'Signing up...';
        btn.disabled = true;
        const data = {
            name: document.getElementById('nl-name').value,
            email: document.getElementById('nl-email').value,
            phone: document.getElementById('nl-phone').value,
            dog_alerts: document.getElementById('nl-alerts').checked,
            newsletter: document.getElementById('nl-newsletter').checked,
            text_ok: document.getElementById('nl-text').checked,
        };
        try {
            const res = await fetch('/api/subscribers', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });
            if (res.ok) {
                document.getElementById('newsletter-form').style.display = 'none';
                document.getElementById('nl-success').style.display = 'block';
            } else { throw new Error(); }
        } catch {
            btn.textContent = 'Sign Me Up ‚Üí';
            btn.disabled = false;
            alert('Something went wrong. Please try again.');
        }
    });


        // ‚îÄ‚îÄ SHARE CARD FUNCTIONS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        function roundRect(ctx, x, y, w, h, r) {
            ctx.beginPath();
            ctx.moveTo(x+r,y); ctx.lineTo(x+w-r,y); ctx.quadraticCurveTo(x+w,y,x+w,y+r);
            ctx.lineTo(x+w,y+h-r); ctx.quadraticCurveTo(x+w,y+h,x+w-r,y+h);
            ctx.lineTo(x+r,y+h); ctx.quadraticCurveTo(x,y+h,x,y+h-r);
            ctx.lineTo(x,y+r); ctx.quadraticCurveTo(x,y,x+r,y); ctx.closePath();
        }

        async function generateCard(dog) {
            const c = document.getElementById('card-canvas');
            const ctx = c.getContext('2d');
            const W = 1080, H = 1080;
            c.width = W; c.height = H;
            ctx.clearRect(0, 0, W, H);

            const daysLeft = Math.ceil((new Date(dog.deadline) - new Date()) / 86400000);
            const isCritical = daysLeft <= 1;

            // Background
            const bg = ctx.createLinearGradient(0,0,W,H);
            bg.addColorStop(0,'#1a1614'); bg.addColorStop(0.5,'#231e1b'); bg.addColorStop(1,'#1a1614');
            ctx.fillStyle = bg; ctx.fillRect(0,0,W,H);
            ctx.save(); ctx.globalAlpha=0.07; ctx.fillStyle='#c4281c';
            ctx.beginPath(); ctx.moveTo(W*0.5,0); ctx.lineTo(W,0); ctx.lineTo(W*0.7,H); ctx.lineTo(0.2*W,H);
            ctx.closePath(); ctx.fill(); ctx.restore();

            // Top bar + badge
            ctx.fillStyle='#c4281c'; ctx.fillRect(0,0,W,12);
            roundRect(ctx,44,32,224,54,27); ctx.fill();
            ctx.fillStyle='white'; ctx.font='bold 26px sans-serif'; ctx.textAlign='center';
            ctx.fillText(isCritical?'üö® CRITICAL':'‚ö†Ô∏è URGENT', 156, 66);
            ctx.fillStyle='rgba(255,255,255,0.38)'; ctx.font='bold 22px sans-serif'; ctx.textAlign='right';
            ctx.fillText('LA DOG DISPATCH', W-44, 66);

            // Shelter tag
            ctx.textAlign='left';
            if (dog.shelter) {
                const tag = dog.shelter.toUpperCase();
                ctx.font='bold 20px sans-serif';
                const tagW = ctx.measureText(tag).width+36;
                ctx.fillStyle='rgba(255,255,255,0.1)'; roundRect(ctx,44,112,tagW,42,8); ctx.fill();
                ctx.fillStyle='rgba(255,255,255,0.55)'; ctx.fillText(tag, 62, 140);
            }

            // Dog name
            const name = (dog.name||dog.shelter_id||'UNKNOWN').toUpperCase();
            let fs = 180; ctx.font=`bold ${fs}px Georgia,serif`;
            while(ctx.measureText(name).width > W-100 && fs>70){fs-=6; ctx.font=`bold ${fs}px Georgia,serif`;}
            ctx.fillStyle='white'; ctx.textAlign='center'; ctx.fillText(name, W/2, 330);
            ctx.fillStyle='#4ecdc4'; ctx.fillRect(44, 348, Math.min(ctx.measureText(name).width,W-88), 7);

            // Meta + deadline
            ctx.fillStyle='rgba(255,255,255,0.55)'; ctx.font='38px sans-serif';
            ctx.textAlign='center';
            ctx.fillText([dog.breed,dog.gender,dog.age].filter(Boolean).join('  ¬∑  '), W/2, 415);
            const dlStr = new Date(dog.deadline).toLocaleDateString('en-US',{month:'long',day:'numeric'});
            ctx.fillStyle=isCritical?'#f87171':'#fca5a5'; ctx.font='bold 38px sans-serif';
            ctx.textAlign='center';
            ctx.fillText(`Deadline: ${dlStr} ‚Äî ${daysLeft<=0?'TODAY':daysLeft===1?'1 DAY LEFT':daysLeft+' DAYS LEFT'}`, W/2, 480);

            // Rescue Only badge on card
            const isRescueOnly = dog.rescue_only === true || dog.rescue_only === "true" || dog.rescue_only === 1;
            if (isRescueOnly) {
                ctx.fillStyle = '#fef3c7';
                const badgeW = 440;
                roundRect(ctx, (W-badgeW)/2, 498, badgeW, 42, 21); ctx.fill();
                ctx.fillStyle = '#92400e'; ctx.font = 'bold 20px sans-serif';
                ctx.textAlign = 'center';
                ctx.fillText('üîí RESCUE ORGANIZATIONS ONLY', W/2, 525);
                ctx.textAlign = 'left';
            }

            // Divider
            ctx.strokeStyle='rgba(255,255,255,0.1)'; ctx.lineWidth=1;
            ctx.beginPath(); ctx.moveTo(44,550); ctx.lineTo(W-44,550); ctx.stroke();

            // CTA text
            ctx.fillStyle='rgba(255,255,255,0.8)'; ctx.font='bold 34px sans-serif';
            ['Donate now or foster this dog;','as always, share passionately','to your followers.']
                .forEach((line,i) => ctx.fillText(line, 44, 610+(i*52), 540));
            ctx.fillStyle='rgba(255,255,255,0.38)'; ctx.font='28px sans-serif';
            ctx.fillText('Fund ¬∑ Foster ¬∑ Rescue this dog  ‚Üí', 44, 790, 540);
            ctx.fillStyle='white'; ctx.font='bold 30px sans-serif';
            ctx.fillText('ladogdispatch.com', 44, 834);
            ctx.fillStyle='rgba(255,255,255,0.6)'; ctx.font='26px sans-serif';
            ctx.fillText('@la_dog_dispatch', 44, 868);

            // Dog photo thumbnail (bottom right)
            if (dog.photo_url) {
                await new Promise(resolve => {
                    const img = new Image();
                    img.crossOrigin='anonymous';
                    const sz=440, tx=W-sz-30, ty=555, r=20;
                    img.onload = () => {
                        ctx.save();
                        ctx.beginPath();
                        ctx.moveTo(tx+r,ty); ctx.lineTo(tx+sz-r,ty); ctx.quadraticCurveTo(tx+sz,ty,tx+sz,ty+r);
                        ctx.lineTo(tx+sz,ty+sz-r); ctx.quadraticCurveTo(tx+sz,ty+sz,tx+sz-r,ty+sz);
                        ctx.lineTo(tx+r,ty+sz); ctx.quadraticCurveTo(tx,ty+sz,tx,ty+sz-r);
                        ctx.lineTo(tx,ty+r); ctx.quadraticCurveTo(tx,ty,tx+r,ty); ctx.closePath();
                        ctx.clip();
                        const scale=Math.max(sz/img.width,sz/img.height);
                        ctx.drawImage(img,tx+(sz-img.width*scale)/2,ty+(sz-img.height*scale)/2,img.width*scale,img.height*scale);
                        ctx.restore();
                        ctx.strokeStyle='rgba(255,255,255,0.2)'; ctx.lineWidth=3;
                        ctx.beginPath();
                        ctx.moveTo(tx+r,ty); ctx.lineTo(tx+sz-r,ty); ctx.quadraticCurveTo(tx+sz,ty,tx+sz,ty+r);
                        ctx.lineTo(tx+sz,ty+sz-r); ctx.quadraticCurveTo(tx+sz,ty+sz,tx+sz-r,ty+sz);
                        ctx.lineTo(tx+r,ty+sz); ctx.quadraticCurveTo(tx,ty+sz,tx,ty+sz-r);
                        ctx.lineTo(tx,ty+r); ctx.quadraticCurveTo(tx,ty,tx+r,ty); ctx.closePath();
                        ctx.stroke(); resolve();
                    };
                    img.onerror = () => resolve();
                    img.src = dog.photo_url.startsWith('http') ? dog.photo_url : window.location.origin+dog.photo_url;
                });
            }

            // Bottom mint bar
            ctx.fillStyle='#4ecdc4'; ctx.fillRect(0,H-14,W,14);
            return c;
        }

        async function shareIGStory(dog) {
            const c = await generateCard(dog);
            const isMobile = /iPhone|iPad|Android/i.test(navigator.userAgent);
            c.toBlob(async blob => {
                const file = new File([blob], `${(dog.name||dog.shelter_id).toLowerCase().replace(/\s+/g,'-')}.png`, {type:'image/png'});
                if (isMobile && navigator.share && navigator.canShare({files:[file]})) {
                    await navigator.share({files:[file], title:`${dog.name||dog.shelter_id} needs rescue ‚Äî ladogdispatch.com`});
                } else {
                    const a = document.createElement('a');
                    a.href = c.toDataURL('image/png');
                    a.download = file.name;
                    a.click();
                    if (isMobile) setTimeout(() => { window.location.href='instagram://story-camera'; }, 800);
                    else alert('Card saved! Open Instagram on your phone, create a Story, and add from camera roll. Tag @la_dog_dispatch!');
                }
            }, 'image/png');
        }

        async function saveCard(dog) {
            const c = await generateCard(dog);
            const a = document.createElement('a');
            a.href = c.toDataURL('image/png');
            a.download = `ladogdispatch-${(dog.name||dog.shelter_id).toLowerCase().replace(/\s+/g,'-')}.png`;
            a.click();
        }

        async function copyDogCaption(btn, dog) {
            const daysLeft = Math.ceil((new Date(dog.deadline) - new Date()) / 86400000);
            const dl = new Date(dog.deadline).toLocaleDateString('en-US',{month:'long',day:'numeric'});
            const isRO = dog.rescue_only === true || dog.rescue_only === 'true' || dog.rescue_only === 1;
            const caption = `üö® ${dog.name||dog.shelter_id} needs rescue by ${dl} ‚Äî ${daysLeft<=0?'TODAY':daysLeft+' day'+(daysLeft!==1?'s':'')+' left'}.\n\n${isRO ? 'üîí RESCUE ORGANIZATIONS ONLY ‚Äî this dog cannot be adopted or fostered directly. A licensed rescue must pull them from the shelter.\n\n' : ''}${dog.breed||'Mixed breed'} at ${dog.shelter||'LA County'} shelter.${isRO ? '' : ' Fosters and donors welcome.'}\n\nFund, foster, or share ‚Üí ladogdispatch.com\n@la_dog_dispatch\n\n#ladogdispatch #urgentdogs #laanimals #rescuedog #dogrescue ${dog.rescue_only ? '#rescueonly ' : '#fosterdog '}#adoptdontshop`;
            try {
                await navigator.clipboard.writeText(caption);
                btn.textContent = '‚úì Copied!';
                btn.classList.add('copied');
                setTimeout(() => { btn.textContent = 'Copy Caption'; btn.classList.remove('copied'); }, 2500);
            } catch(e) { prompt('Copy this caption:', caption); }
        }

    </script>
</body>
</html>
